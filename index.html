<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap');
            * {
                border: 0;
                padding: 0;
                margin: 0;
                outline: none;
                user-select: none;
                font-family: "Outfit", serif;
                font-optical-sizing: auto;
                font-style: normal;
            }
            body {
                background-color: #111111;
                color: #EEEEEE;
                font-size: 15px;
            }
            .screen, .screen .tab {
                display: none;
            }
        </style>
    </head>
    <body>
    </body>
    <script>
        function selectTab(id) {
            parent = null
            tabs = document.getElementsByClassName("tab")
            screens = document.getElementsByClassName("screen")
            for (var tab in tabs) {
                tab = tabs[tab]
                if (tab.className === "tab") {
                    if (tab.id === id) {
                        parent = tab.parentElement
                        tab.style.display = "block"
                    } else {
                        tab.style.display = "none"
                    }
                }
            }
            for (var screen in screens) {
                screen = screens[screen]
                if (screen.className === "screen") {
                    if (screen.id === parent.id) {
                        screen.style.display = "block"
                    } else {
                        screen.style.display = "none"
                    }
                }
            }
        }
        const API = (function(username, password){
            if (!localStorage.getItem("vault")) localStorage.setItem("vault", JSON.stringify({ services: { unknown: [] } }))
            vault = JSON.parse(localStorage.getItem("vault"))
            key = (function(){
                blocks = [{}, {}]
                username.split("").forEach((character, index) => {
                    if (!blocks[0][Math.floor(index/username.split("").length * 20)]) blocks[0][Math.floor(index/username.split("").length * 20)] = []
                    blocks[0][Math.floor(index/username.split("").length * 20)].push(character.charCodeAt(0))
                })
                password.split("").forEach((character, index) => {
                    if (!blocks[1][Math.floor(index/password.split("").length * 20)]) blocks[1][Math.floor(index/password.split("").length * 20)] = []
                    blocks[1][Math.floor(index/password.split("").length * 20)].push(character.charCodeAt(0))
                })
                blocks = [
                    Object.entries(blocks[0]).map((block) => Math.round(block[1].reduce((previous, value) => { return previous + value })/block[1].length)),
                    Object.entries(blocks[1]).map((block) => Math.round(block[1].reduce((previous, value) => { return previous + value })/block[1].length))
                ]
                return Array.from({ length: blocks[0].length + blocks[1].length }, (value, index) => (blocks[0][index % blocks[0].length] ^ blocks[1][index % blocks[1].length]))
            })()
            return {
                emails: {
                    create(email) {
                        if (vault.services[email]) return null
                        vault.services[email] = []
                        localStorage.setItem("vault", JSON.stringify(vault))
                        return email
                    },
                    all() {
                        return Object.entries(vault.services).map((email) => email[0])
                    },
                    generate(email, length=20) {
                        if (!vault.services[email]) return null
                        blocks = [key, {}]
                        characters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`1234567890-=[];',./~!@#$%^&*()_+{}|:<>?"
                        email.split("").forEach((character, index) => {
                            if (!blocks[1][Math.floor(index/email.split("").length * length)]) blocks[1][Math.floor(index/email.split("").length * length)] = []
                            blocks[1][Math.floor(index/email.split("").length * length)].push(character.charCodeAt(0))
                        })
                        blocks[1] = Object.entries(blocks[1]).map((block) => Math.round(block[1].reduce((previous, value) => { return previous + value })/block[1].length))
                        return Array.from({ length: length }, (value, index) => characters[(blocks[0][index % blocks[0].length] ^ blocks[1][index % blocks[1].length]) % characters.length]).join("")
                    }
                },
                services(email) {
                    if (!vault.services[email]) return null
                    return {
                        create(name) {
                            if (vault.services[email].includes(name)) return null
                            vault.services[email].push(name)
                            localStorage.setItem("vault", JSON.stringify(vault))
                            return name
                        },
                        all() {
                            return vault.services[email]
                        },
                        generate(name, length=20) {
                            if (!vault.services[email].includes(name)) return null
                            blocks = [key, {}, {}]
                            characters = "?><:|}{+_)(*&^%$#@!~/.,';][=-0987654321`ZYXWVUTSRQPONMLKJIHGFEDCBAzyxwvutsrqponmlkjihgfedcba"
                            email.split("").forEach((character, index) => {
                                if (!blocks[1][Math.floor(index/email.split("").length * length)]) blocks[1][Math.floor(index/email.split("").length * length)] = []
                                blocks[1][Math.floor(index/email.split("").length * length)].push(character.charCodeAt(0))
                            })
                            name.split("").forEach((character, index) => {
                                if (!blocks[1][Math.floor(index/name.split("").length * length)]) blocks[1][Math.floor(index/name.split("").length * length)] = []
                                blocks[1][Math.floor(index/name.split("").length * length)].push(character.charCodeAt(0))
                            })
                            blocks[1] = Object.entries(blocks[1]).map((block) => Math.round(block[1].reduce((previous, value) => { return previous + value })/block[1].length)),
                            blocks[2] = Object.entries(blocks[2]).map((block) => Math.round(block[1].reduce((previous, value) => { return previous + value })/block[2].length))
                            return Array.from({ length: length }, (value, index) => characters[((blocks[0][index % blocks[0].length] ^ blocks[1][index % blocks[1].length]) ^ blocks[2][index % blocks[2].length]) % characters.length]).join("")
                        }
                    }
                }
            }
        })("", "")
    </script>
</html>
